<div class="chart-container">

    <!-- If we're still loading data, show a spinner -->
    <div *ngIf="isLoading" class="loading-container">
      <mat-spinner diameter="50" color="accent"></mat-spinner>
      <p data-translate>Loading your performance data...</p>
    </div>
  
    <!-- Otherwise, either show the charts or a "no data" message -->
    <div *ngIf="!isLoading">
      <div *ngIf="topicScores.length > 0" class="charts-wrapper">
        
        <!-- Bar Chart Card -->
        <mat-card class="chart-card">
          <mat-card-header>
            <div class="card-header-icon">
              <mat-icon color="primary">bar_chart</mat-icon>
            </div>
            <mat-card-title data-translate>{{translatedTexts['Score by Subject'||'Score by Subject']}}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-wrapper">
              <!-- Use #barChartCanvas for the bar chart -->
              <canvas #barChartCanvas width="400" height="300"></canvas>
            </div>
          </mat-card-content>
        </mat-card>
  
        <!-- Doughnut Chart Card -->
        <mat-card class="chart-card">
          <mat-card-header>
            <div class="card-header-icon">
              <mat-icon color="primary">pie_chart</mat-icon>
            </div>
            <mat-card-title>{{translatedTexts['Score Distribution'||'Score Distribution']}} </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="chart-wrapper">
              <!-- Use #doughnutChartCanvas for the doughnut chart -->
              <canvas #doughnutChartCanvas width="400" height="300"></canvas>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
  
      <!-- If topicScores is empty, show "no data" message -->
      <div *ngIf="topicScores.length === 0" class="no-data-container">
        <mat-icon color="primary" class="no-data-icon">info</mat-icon>
        <h3 data-translate>No Performance Data Available</h3>
        <p data-translate>Complete some quizzes to see your performance across different subjects.</p>
      </div>
    </div>
  </div>
