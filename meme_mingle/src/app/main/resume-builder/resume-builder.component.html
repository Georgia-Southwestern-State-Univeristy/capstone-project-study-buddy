<div class="resume-builder-container">
  <!-- Progress Indicator -->
  <div class="progress-tracker">
    <div class="step" [ngClass]="{'active': currentStep >= 1, 'completed': currentStep > 1}">
      <div class="step-icon">1</div>
      <div class="step-label" data-translate>{{ translatedTexts['Create Resume'] || 'Create Resume' }}</div>
    </div>
    <div class="step" [ngClass]="{'active': currentStep >= 2, 'completed': currentStep > 2}">
      <div class="step-icon">2</div>
      <div class="step-label" data-translate>{{ translatedTexts['Save'] || 'Save' }}</div>
    </div>
    <div class="step" [ngClass]="{'active': currentStep >= 3, 'completed': currentStep > 3}">
      <div class="step-icon">3</div>
      <div class="step-label" data-translate>{{ translatedTexts['Enhance'] || 'Enhance' }}</div>
    </div>
    <div class="step" [ngClass]="{'active': currentStep >= 4}">
      <div class="step-icon">4</div>
      <div class="step-label" data-translate>{{ translatedTexts['Download'] || 'Download' }}</div>
    </div>
  </div>

  <div class="card gsw-card">
    <div class="card-header gsw-card-header">
      <h2 data-translate><i class="fas fa-file-alt"></i> {{ translatedTexts['Resume Builder'] || 'Resume Builder' }}</h2>
      <p class="header-subtitle" data-translate>{{ translatedTexts['Create a professional resume in minutes with AI enhancement'] || 'Create a professional resume in minutes with AI enhancement' }}</p>
    </div>

    <!-- Main Form -->
    <form class="resumeForm" [formGroup]="personForm" (ngSubmit)="onSubmit()">
      <!-- Navigation Tabs -->
      <div class="form-nav-tabs">
        <div class="nav-tab" (click)="setActiveTab('personal')" [ngClass]="{'active': activeTab === 'personal'}">
          <i class="fas fa-user"></i> {{ translatedTexts['Personal'] || 'Personal' }}
        </div>
        <div class="nav-tab" (click)="setActiveTab('education')" [ngClass]="{'active': activeTab === 'education'}">
          <i class="fas fa-graduation-cap"></i> {{ translatedTexts['Education'] || 'Education' }}
        </div>
        <div class="nav-tab" (click)="setActiveTab('experience')" [ngClass]="{'active': activeTab === 'experience'}">
          <i class="fas fa-briefcase"></i> {{ translatedTexts['Experience'] || 'Experience' }}
        </div>
        <div class="nav-tab" (click)="setActiveTab('skills')" [ngClass]="{'active': activeTab === 'skills'}">
          <i class="fas fa-star"></i> {{ translatedTexts['Skills'] || 'Skills' }}
        </div>
        <div class="nav-tab" (click)="setActiveTab('projects')" [ngClass]="{'active': activeTab === 'projects'}">
          <i class="fas fa-code-branch"></i> {{ translatedTexts['Projects'] || 'Projects' }}
        </div>
      </div>

      <!-- Personal Information Tab -->
      <div class="form-tab-content" *ngIf="activeTab === 'personal'">
        <!-- 1. PERSONAL INFORMATION -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user-circle"></i>
            <h3 data-translate>{{ translatedTexts['Personal Information'] || 'Personal Information' }}</h3>
          </div>
          <div class="form-row">
            <div class="form-group half-width">
              <label for="fName" data-translate>{{ translatedTexts['First Name'] || 'First Name' }} <span class="required">*</span></label>
              <input id="fName" type="text" [placeholder]="translatedTexts['First Name'] || 'First Name'" formControlName="fName" />
              <div class="form-hint" data-translate>{{ translatedTexts['Your legal first name'] || 'Your legal first name' }}</div>
            </div>
            <div class="form-group half-width">
              <label for="lName" data-translate>{{ translatedTexts['Last Name'] || 'Last Name' }} <span class="required">*</span></label>
              <input id="lName" type="text" [placeholder]="translatedTexts['Last Name'] || 'Last Name'" formControlName="lName" />
            </div>
          </div>
          <div class="form-group">
            <label for="description" data-translate>{{ translatedTexts['Professional Summary'] || 'Professional Summary' }}</label>
            <textarea
              id="description"
              [placeholder]="translatedTexts['Briefly describe your professional background and career goals'] || 'Briefly describe your professional background and career goals'"
              formControlName="description"
            ></textarea>
            <div class="character-counter">{{ getCharacterCount('description') }}/300 characters</div>
          </div>
        </div>

        <!-- 2. CAREER GOALS -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-bullseye"></i>
            <h3 data-translate>{{ translatedTexts['Career Goals'] || 'Career Goals' }}</h3>
          </div>
          <div class="form-group">
            <label for="career" data-translate>{{ translatedTexts['Primary Career Goal'] || 'Primary Career Goal' }} <span class="required">*</span></label>
            <input id="career" type="text" [placeholder]="translatedTexts['e.g. Software Engineer'] || 'e.g. Software Engineer'" formControlName="career" />
          </div>
          <div class="form-row">
            <div class="form-group half-width">
              <label for="career2" data-translate>{{ translatedTexts['Alternate Career'] || 'Alternate Career' }}</label>
              <input
                id="career2"
                type="text"
                [placeholder]="translatedTexts['e.g. Data Scientist'] || 'e.g. Data Scientist'"
                formControlName="career2"
              />
            </div>
            <div class="form-group half-width">
              <label for="career3" data-translate>{{ translatedTexts['Alternate Career'] || 'Alternate Career' }}</label>
              <input
                id="career3"
                type="text"
                [placeholder]="translatedTexts['e.g. Web Developer'] || 'e.g. Web Developer'"
                formControlName="career3"
              />
            </div>
          </div>
        </div>

        <!-- 3. CONTACT INFORMATION -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-address-card"></i>
            <h3 data-translate>{{ translatedTexts['Contact Information'] || 'Contact Information' }}</h3>
          </div>
          <div class="form-row">
            <div class="form-group half-width">
              <label for="phoneNum" data-translate>{{ translatedTexts['Mobile Number'] || 'Mobile Number' }} <span class="required">*</span></label>
              <div class="input-with-icon">
                <i class="fas fa-phone"></i>
                <input
                  type="tel"
                  id="phoneNum"
                  placeholder="(###) ###-####"
                  formControlName="phoneNum"
                />
              </div>
            </div>
            <div class="form-group half-width">
              <label for="email" data-translate>{{ translatedTexts['E-mail'] || 'E-mail' }} <span class="required">*</span></label>
              <div class="input-with-icon">
                <i class="fas fa-envelope"></i>
                <input
                  type="email"
                  id="email"
                  placeholder="you@example.com"
                  formControlName="email"
                />
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="website" data-translate>{{ translatedTexts['Personal Website'] || 'Personal Website' }}</label>
            <div class="input-with-icon">
              <i class="fas fa-globe"></i>
              <input
                type="text"
                id="website"
                placeholder="www.your-site.com"
                formControlName="website"
              />
            </div>
          </div>

          <!-- MULTIPLE SOCIAL MEDIA ACCOUNTS -->
          <div class="subsection-header">
            <h4 data-translate>{{ translatedTexts['Social Media Accounts'] || 'Social Media Accounts' }}</h4>
            <div class="tooltip-icon" [title]="translatedTexts['Add your professional social media profiles'] || 'Add your professional social media profiles'">
              <i class="fas fa-info-circle"></i>
            </div>
          </div>
          
          <div formArrayName="socialAccounts" class="social-accounts-container">
            <div
              class="mini-card social-card"
              *ngFor="let social of socialAccountsControls; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="btn btn-danger remove-btn small-remove"
                (click)="removeSocialAccount(i)"
              >
                &times;
              </button>

              <div class="form-row">
                <div class="form-group half-width">
                  <label data-translate>{{ translatedTexts['Platform'] || 'Platform' }}</label>
                  <select formControlName="platform" class="platform-select">
                    <option value="">{{ translatedTexts['Select platform'] || 'Select platform' }}</option>
                    <option value="LinkedIn">{{ translatedTexts['LinkedIn'] || 'LinkedIn' }}</option>
                    <option value="GitHub">{{ translatedTexts['GitHub'] || 'GitHub' }}</option>
                    <option value="Twitter">{{ translatedTexts['Twitter'] || 'Twitter' }}</option>
                    <option value="Instagram">{{ translatedTexts['Instagram'] || 'Instagram' }}</option>
                    <option value="Other">{{ translatedTexts['Other'] || 'Other' }}</option>
                  </select>
                </div>
                <div class="form-group half-width">
                  <label data-translate>{{ translatedTexts['Handle'] || 'Handle' }}</label>
                  <input
                    type="text"
                    [placeholder]="translatedTexts['e.g. @john_doe'] || 'e.g. @john_doe'"
                    formControlName="handle"
                  />
                </div>
              </div>
              <div class="form-group">
                <label data-translate>{{ translatedTexts['Profile URL'] || 'Profile URL' }}</label>
                <div class="input-with-icon">
                  <i class="fas fa-link"></i>
                  <input
                    type="text"
                    [placeholder]="translatedTexts['e.g. https://www.linkedin.com/in/john-doe'] || 'e.g. https://www.linkedin.com/in/john-doe'"
                    formControlName="link"
                  />
                </div>
              </div>
            </div>

            <!-- Button to add more Social Accounts -->
            <button
              type="button"
              class="btn btn-secondary add-btn"
              (click)="addSocialAccount()"
            >
               {{ translatedTexts['Add Social Media Profile'] || 'Add Social Media Profile' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Education Tab -->
      <div class="form-tab-content" *ngIf="activeTab === 'education'">
        <!-- 5. EDUCATION -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-graduation-cap"></i>
            <h3 data-translate>{{ translatedTexts['Education'] || 'Education' }}</h3>
          </div>
          <div formArrayName="education" class="education-container">
            <div
              class="mini-card education-card"
              *ngFor="let edu of educationControls; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="btn btn-danger remove-btn small-remove"
                (click)="removeEducation(i)"
              >
                &times;
              </button>

              <div class="card-header-mini">{{ translatedTexts['Education'] || 'Education' }} #{{i + 1}}</div>

              <div class="form-group">
                <label for="school" data-translate>{{ translatedTexts['School/University Name'] || 'School/University Name' }} <span class="required">*</span></label>
                <div class="input-with-icon">
                  <i class="fas fa-university"></i>
                  <input
                    id="school"
                    type="text"
                    [placeholder]="translatedTexts['e.g. Georgia Southwestern University'] || 'e.g. Georgia Southwestern University'"
                    formControlName="school"
                  />
                </div>
              </div>
              <div class="form-row">
                <div class="form-group half-width">
                  <label for="grad" data-translate>{{ translatedTexts['Graduation Date'] || 'Graduation Date' }}</label>
                  <input type="month" id="grad" formControlName="grad" />
                </div>
                <div class="form-group half-width">
                  <label for="major" data-translate>{{ translatedTexts['Degree/Major'] || 'Degree/Major' }} <span class="required">*</span></label>
                  <input
                    type="text"
                    id="major"
                    [placeholder]="translatedTexts['e.g. B.S. in Computer Science'] || 'e.g. B.S. in Computer Science'"
                    formControlName="major"
                  />
                </div>
              </div>
            </div>

            <button
              type="button"
              class="btn btn-secondary add-btn"
              (click)="addEducation()"
            >
               {{ translatedTexts['Add Education'] || 'Add Education' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Experience Tab -->
      <div class="form-tab-content" *ngIf="activeTab === 'experience'">
        <!-- 6. WORK EXPERIENCE -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-briefcase"></i>
            <h3 data-translate>{{ translatedTexts['Work Experience'] || 'Work Experience' }}</h3>
          </div>
          <div formArrayName="experience">
            <div
              class="mini-card experience-card"
              *ngFor="let exp of experienceControls; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="btn btn-danger remove-btn small-remove"
                (click)="removeExperience(i)"
              >
                &times;
              </button>

              <div class="card-header-mini">{{ translatedTexts['Experience'] || 'Experience' }} #{{i + 1}}</div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label for="exp_company" data-translate>{{ translatedTexts['Company Name'] || 'Company Name' }} <span class="required">*</span></label>
                  <div class="input-with-icon">
                    <i class="fas fa-building"></i>
                    <input
                      type="text"
                      id="exp_company"
                      [placeholder]="translatedTexts['e.g. Google'] || 'e.g. Google'"
                      formControlName="exp_company"
                    />
                  </div>
                </div>
                <div class="form-group half-width">
                  <label for="exp_date" data-translate>{{ translatedTexts['Employment Period'] || 'Employment Period' }} <span class="required">*</span></label>
                  <div class="input-with-icon">
                    <i class="fas fa-calendar-alt"></i>
                    <input
                      type="text"
                      id="exp_date"
                      [placeholder]="translatedTexts['e.g. 2021 - 2023'] || 'e.g. 2021 - 2023'"
                      formControlName="exp_date"
                    />
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="exp_description" data-translate>{{ translatedTexts['Description of Role'] || 'Description of Role' }} <span class="required">*</span></label>
                <textarea
                  id="exp_description"
                  [placeholder]="translatedTexts['Describe your responsibilities, achievements, and technologies used'] || 'Describe your responsibilities, achievements, and technologies used'"
                  formControlName="exp_description"
                ></textarea>
                <div class="writing-tips">
                  <i class="fas fa-lightbulb"></i> {{ translatedTexts['Pro tip: Use action verbs and quantify your achievements when possible'] || 'Pro tip: Use action verbs and quantify your achievements when possible' }}
                </div>
              </div>
            </div>

            <button
              type="button"
              class="btn btn-secondary add-btn"
              (click)="addExperience()"
            >
               {{ translatedTexts['Add Work Experience'] || 'Add Work Experience' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Skills Tab -->
      <div class="form-tab-content" *ngIf="activeTab === 'skills'">
        <!-- 4. SKILLS & ACHIEVEMENTS -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-star"></i>
            <h3 data-translate>{{ translatedTexts['Skills & Achievements'] || 'Skills & Achievements' }}</h3>
          </div>
          <div class="form-group">
            <label for="skills" data-translate>{{ translatedTexts['Technical Skills'] || 'Technical Skills' }} <span class="required">*</span></label>
            <div class="skills-chips-container">
              <textarea
                id="skills"
                [placeholder]="translatedTexts['List your relevant skills (e.g. Java, React, Project Management)'] || 'List your relevant skills (e.g. Java, React, Project Management)'"
                formControlName="skills"
              ></textarea>
              <div class="skills-suggestions">
                <span class="skill-chip" (click)="addSkill('JavaScript')">{{ translatedTexts['JavaScript'] || 'JavaScript' }}</span>
                <span class="skill-chip" (click)="addSkill('Python')">{{ translatedTexts['Python'] || 'Python' }}</span>
                <span class="skill-chip" (click)="addSkill('React')">{{ translatedTexts['React'] || 'React' }}</span>
                <span class="skill-chip" (click)="addSkill('Angular')">{{ translatedTexts['Angular'] || 'Angular' }}</span>
                <span class="skill-chip" (click)="addSkill('Node.js')">{{ translatedTexts['Node.js'] || 'Node.js' }}</span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="achievements" data-translate>{{ translatedTexts['Achievements/Awards'] || 'Achievements/Awards' }}</label>
            <textarea
              id="achievements"
              [placeholder]="translatedTexts['e.g. Dean\'s List, Hackathon Winner, etc.'] || 'e.g. Dean\'s List, Hackathon Winner, etc.'"
              formControlName="achievements"
            ></textarea>
          </div>
          <div class="form-group">
            <label for="certifications" data-translate>{{ translatedTexts['Certifications'] || 'Certifications' }}</label>
            <textarea
              id="certifications"
              [placeholder]="translatedTexts['e.g. AWS Certified, PMP, etc.'] || 'e.g. AWS Certified, PMP, etc.'"
              formControlName="certifications"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Projects Tab -->
      <div class="form-tab-content" *ngIf="activeTab === 'projects'">
        <!-- 7. PROJECTS -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-code-branch"></i>
            <h3 data-translate>{{ translatedTexts['Projects'] || 'Projects' }}</h3>
          </div>
          <div formArrayName="projects">
            <div
              class="mini-card project-card"
              *ngFor="let proj of projectControls; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="btn btn-danger remove-btn small-remove"
                (click)="removeProject(i)"
              >
                &times;
              </button>

              <div class="card-header-mini">{{ translatedTexts['Project'] || 'Project' }} #{{i + 1}}</div>

              <div class="form-row">
                <div class="form-group half-width">
                  <label for="projectName" data-translate>{{ translatedTexts['Project Name'] || 'Project Name' }} <span class="required">*</span></label>
                  <input
                    type="text"
                    id="projectName"
                    [placeholder]="translatedTexts['e.g. Personal Portfolio'] || 'e.g. Personal Portfolio'"
                    formControlName="projectName"
                  />
                </div>
                <div class="form-group half-width">
                  <label for="projectUrl" data-translate>{{ translatedTexts['Project URL'] || 'Project URL' }}</label>
                  <div class="input-with-icon">
                    <i class="fas fa-link"></i>
                    <input
                      type="text"
                      id="projectUrl"
                      [placeholder]="translatedTexts['e.g. https://github.com/yourusername/project'] || 'e.g. https://github.com/yourusername/project'"
                      formControlName="projectUrl"
                    />
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="projectDesc" data-translate>{{ translatedTexts['Project Description'] || 'Project Description' }} <span class="required">*</span></label>
                <textarea
                  id="projectDesc"
                  [placeholder]="translatedTexts['Describe the project, your role, technologies used, and outcomes'] || 'Describe the project, your role, technologies used, and outcomes'"
                  formControlName="projectDesc"
                ></textarea>
              </div>
            </div>

            <button
              type="button"
              class="btn btn-secondary add-btn"
              (click)="addProject()"
            >
               {{ translatedTexts['Add Project'] || 'Add Project' }}
            </button>
          </div>
        </div>

        <!-- 8. REFERENCES -->
        <div class="form-section">
          <div class="section-header">
            <i class="fas fa-user-check"></i>
            <h3 data-translate>{{ translatedTexts['References'] || 'References' }}</h3>
          </div>
          <div formArrayName="references">
            <div
              class="mini-card reference-card"
              *ngFor="let ref of referenceControls; let i = index"
              [formGroupName]="i"
            >
              <button
                type="button"
                class="btn btn-danger remove-btn small-remove"
                (click)="removeReference(i)"
              >
                &times;
              </button>

              <div class="form-row">
                <div class="form-group half-width">
                  <label for="refName" data-translate>{{ translatedTexts['Reference Name'] || 'Reference Name' }}</label>
                  <input
                    type="text"
                    id="refName"
                    [placeholder]="translatedTexts['e.g. John Doe'] || 'e.g. John Doe'"
                    formControlName="refName"
                  />
                </div>
                <div class="form-group half-width">
                  <label for="refContact" data-translate>{{ translatedTexts['Contact Info'] || 'Contact Info' }}</label>
                  <input
                    type="text"
                    id="refContact"
                    [placeholder]="translatedTexts['Email or Phone'] || 'Email or Phone'"
                    formControlName="refContact"
                  />
                </div>
              </div>
            </div>

            <button
              type="button"
              class="btn btn-secondary add-btn"
              (click)="addReference()"
            >
               {{ translatedTexts['Add Reference'] || 'Add Reference' }}
            </button>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions">
        <!-- Navigation buttons -->
        <div class="tab-navigation">
          <button 
            type="button" 
            class="btn btn-outline-secondary" 
            [disabled]="isPreviousTabDisabled()"
            (click)="goToPreviousTab()"
          >
            <i class="fas fa-arrow-left"></i> {{ translatedTexts['Previous'] || 'Previous' }}
          </button>
          <button 
            type="button" 
            class="btn btn-outline-primary" 
            [disabled]="isNextTabDisabled()"
            (click)="goToNextTab()"
          >
            {{ translatedTexts['Next'] || 'Next' }} <i class="fas fa-arrow-right"></i>
          </button>
        </div>
        
        <!-- Submit buttons -->
        <div class="submit-buttons">
          <!-- "Save to DB" button calls onSubmit() -->
          <button
            type="submit"
            class="btn btn-primary"
            id="saveResumeBtn"
          >
            <i class="fas fa-save"></i> {{ translatedTexts['Save Resume'] || 'Save Resume' }}
          </button>

          <!-- "Download Original" uses docxtemplater -->
          <button
            type="button"
            class="btn btn-secondary"
            (click)="downloadOriginalDocx()"
          >
            <i class="fas fa-file-download"></i> {{ translatedTexts['Download Draft'] || 'Download Draft' }}
          </button>
        </div>
      </div>
    </form>

    <!-- AFTER SAVE => Show extra buttons & improved text -->
    <div class="after-save" *ngIf="createdResumeId">
      <div class="success-indicator">
        <i class="fas fa-check-circle"></i>
        <span class="resume-id-badge">{{ translatedTexts['Resume ID:'] || 'Resume ID:' }} {{ createdResumeId }}</span>
      </div>

      <div class="enhancement-actions">
        <!-- 1) AI Enhance -->
        <button
          type="button"
          class="btn btn-enhance"
          (click)="improveResume()"
          [disabled]="isImproving"
        >
          <i class="fas" [ngClass]="isImproving ? 'fa-spinner fa-spin' : 'fa-magic'"></i>
          {{ isImproving ? (translatedTexts['Enhancing Resume...'] || 'Enhancing Resume...') : (translatedTexts['Enhance with AI'] || 'Enhance with AI') }}
        </button>

        <!-- 2) Download Enhanced => only if we have AI text -->
        <button
          type="button"
          class="btn btn-download"
          (click)="downloadEnhancedDocx()"
          [disabled]="!enhancedResumeText"
        >
          <i class="fas fa-file-download"></i>
          {{ translatedTexts['Download Enhanced'] || 'Download Enhanced' }}
        </button>
      </div>
      
      <!-- Enhanced Preview -->
      <div class="enhanced-preview" *ngIf="enhancedResumeText">
        <div class="preview-header">
          <div class="preview-title">
            <i class="fas fa-robot"></i>
            <h3 data-translate>{{ translatedTexts['AI-Enhanced Resume'] || 'AI-Enhanced Resume' }}</h3>
          </div>
          
          <div class="ats-score-container">
            <div class="ats-score-label" data-translate>{{ translatedTexts['ATS Score'] || 'ATS Score' }}</div>
            <div class="ats-score-circle" [ngStyle]="{ '--score': atsScore }">
              <span>{{ atsScore || 'N/A' }}</span>
            </div>
          </div>
        </div>
        
        <div class="enhanced-content">
          <pre>{{ enhancedResumeText }}</pre>
        </div>
        
        <div class="enhancement-tips">
          <div class="tip-card">
            <i class="fas fa-lightbulb"></i>
            <p data-translate>{{ translatedTexts['Keywords optimized for increased visibility by recruiters\' automated systems.'] || 'Keywords optimized for increased visibility by recruiters\' automated systems.' }}</p>
          </div>
          <div class="tip-card">
            <i class="fas fa-chart-line"></i>
            <p data-translate>{{ translatedTexts['Professional tone and language improved for better industry alignment.'] || 'Professional tone and language improved for better industry alignment.' }}</p>
          </div>
          <div class="tip-card">
            <i class="fas fa-check-circle"></i>
            <p data-translate>{{ translatedTexts['Grammar and formatting perfected for professional appearance.'] || 'Grammar and formatting perfected for professional appearance.' }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Dialog Boxes -->

<!-- Success Dialog -->
<div class="dialog-overlay" *ngIf="showSuccessDialog">
  <div class="dialog-box dialog-success">
    <div class="dialog-header">
      <i class="fas fa-check-circle"></i>
      <h3>{{ translatedTexts[successDialogTitle] || successDialogTitle }}</h3>
      <button type="button" class="dialog-close" (click)="closeDialog()">×</button>
    </div>
    <div class="dialog-content">
      <p>{{ translatedTexts[successDialogMessage] || successDialogMessage }}</p>
      
      <!-- Resume ID (conditionally shown) -->
      <div *ngIf="createdResumeId && showResumeIdInDialog">
        <p>{{ translatedTexts['Your resume has been saved successfully with ID:'] || 'Your resume has been saved successfully with ID:' }}</p>
        <div class="resume-id-highlight">{{ createdResumeId }}</div>
      </div>
      
      <!-- ATS Score (conditionally shown) -->
      <div class="ats-score-display" *ngIf="atsScore && showAtsScoreInDialog">
        <div class="score-circle" [ngStyle]="{ '--score': atsScore }">
          <span>{{ atsScore }}</span>
        </div>
        <div>
          <p><strong>{{ translatedTexts['ATS Score'] || 'ATS Score' }}</strong></p>
          <p>{{ translatedTexts['Your resume has been optimized for Applicant Tracking Systems'] || 'Your resume has been optimized for Applicant Tracking Systems' }}</p>
        </div>
      </div>
    </div>
    <div class="dialog-footer">
      <button type="button" class="btn btn-success" (click)="closeDialog()">
        <i class="fas fa-check"></i> {{ translatedTexts['Continue'] || 'Continue' }}
      </button>
    </div>
  </div>
</div>

<!-- Error Dialog -->
<div class="dialog-overlay" *ngIf="showErrorDialog">
  <div class="dialog-box dialog-error">
    <div class="dialog-header">
      <i class="fas fa-exclamation-triangle"></i>
      <h3>{{ translatedTexts[errorDialogTitle] || errorDialogTitle }}</h3>
      <button type="button" class="dialog-close" (click)="closeDialog()">×</button>
    </div>
    <div class="dialog-content">
      <p>{{ translatedTexts[errorDialogMessage] || errorDialogMessage }}</p>
      <p *ngIf="errorDetails" class="text-muted"><small>Technical details: {{ errorDetails }}</small></p>
    </div>
    <div class="dialog-footer">
      <button type="button" class="btn btn-outline-secondary" (click)="closeDialog()">
        <i class="fas fa-times"></i> {{ translatedTexts['Close'] || 'Close' }}
      </button>
      <button *ngIf="errorRetryAction" type="button" class="btn btn-danger" (click)="retryErrorAction()">
        <i class="fas fa-redo"></i> {{ translatedTexts['Try Again'] || 'Try Again' }}
      </button>
    </div>
  </div>
</div>

<!-- Info Dialog -->
<div class="dialog-overlay" *ngIf="showInfoDialog">
  <div class="dialog-box dialog-info">
    <div class="dialog-header">
      <i class="fas fa-info-circle"></i>
      <h3>{{ translatedTexts[infoDialogTitle] || infoDialogTitle }}</h3>
      <button type="button" class="dialog-close" (click)="closeDialog()">×</button>
    </div>
    <div class="dialog-content">
      <p>{{ translatedTexts[infoDialogMessage] || infoDialogMessage }}</p>
    </div>
    <div class="dialog-footer">
      <button type="button" class="btn btn-outline-secondary" (click)="closeDialog()">
        {{ translatedTexts['Cancel'] || 'Cancel' }}
      </button>
      <button type="button" class="btn btn-primary" (click)="confirmInfoAction()">
        <i class="fas" [ngClass]="infoDialogConfirmIcon"></i> {{ translatedTexts[infoDialogConfirmText] || infoDialogConfirmText }}
      </button>
    </div>
  </div>
</div>
</div>